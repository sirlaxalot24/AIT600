(function ($, Drupal) {
  'use strict';

  //Click off function
  $.fn.clickOff = function(callback, selfDestroy) {
    var clicked = false;
    var parent = this;
    var destroy = selfDestroy || true;

    parent.click(function() {
      clicked = true;
    });

    $(document).click(function(event) {
      if (!clicked) {
        callback(parent, event);
      }
      if (destroy) {
        //parent.clickOff = function() {};
        //parent.off("click");
        //$(document).off("click");
        //parent.off("clickOff");
      }
      clicked = false;
    });
  };

  // Subnav open
  function subNavOpen(li) {
    $(li).on('click', function (e) {
      e.stopPropagation();
      $(this).siblings().find('.menu').removeClass('active');
      $(this).find('> .menu').toggleClass('active');
    });
  }

  // Clear all active state of the nav
  function clearNav() {
    $('#primary-nav, #primary-nav ul.menu, #primary-nav li').removeClass('active');
  }

  // What to do on the nav closed
  function closeNav() {
    $('#header .hamburger').removeClass('is-active');
    clearNav();
    $('.fade').removeClass('show');
  }

  //Search
  var $search = $('.form-type-search');
  function closeSearch() {
    $search.removeClass('opened').find('input.seach').value('');
  }

  $('svg', $search).on('click', function () {
    $(this).parents($search).toggleClass('opened');
  });

    // Desktop nav
    var $fade = $('.fade');
    $('#primary-nav >.menu > li').on('click', function () {
      if(window.innerWidth < 1000) {
        return false;
      }
        if($(this).find('>.menu').length === 0) {
          return false;
        }
        $(this).toggleClass('active').siblings().removeClass('active');
        $('#primary-nav > .menu > li').hasClass('active') ? $fade.addClass('show') : $fade.removeClass('show');

    });
    // Mobile nav
    $('#header .hamburger').on('click', function () {
      if(window.innerWidth >= 1000) {
        return false;
      }
        $(this).toggleClass('is-active');
        $('#primary-nav').toggleClass('active');
        $('.fade').toggleClass('show');
    });

    subNavOpen('#primary-nav li');

  /**
   * Set a min-height to all slider item to have a unitary size(h);
   */
  function setHeroMinH() {
    var list = $('#heroCarousel').find('.carousel-item');
    var heights = [];

    $.each(list, function(ind, el) {
      heights.push($(el).outerHeight());
    });

    list.css('min-height', Math.max.apply(null, heights) + 'px');
  };

  function resetMissionSupport() {
    if(window.innerWidth >= 670) {
      $('.description-mob').removeClass('active');
      $('.contract-select-tab:first-child, .MST-tab:first-child').click();
    }
  };

    /**
   * Debounce function implementation
   */

  function _debounce(fn, delay) {
    var timeout;

    if(!fn.length) {
      throw 'Set at least one fn in the array argument for the _debounce function!'; // Throw an error if no arguments are passed to the _debaounce function.
    }

    return function() {
      if(timeout) clearTimeout(timeout);

      timeout = setTimeout(function() {
            fn.forEach(function (el) {
              el();
            });
          }, // If the callback function DOES NOT have an argument, it is called here.
        (delay ? delay : 50) // If no delay is set for the setTimeout, it default to 50.
      );
    }
  };

  /**
   Center menu above 1200px
   */

  function setPadding() {
    if (window.innerWidth > 1000) {
      $('.fade').removeClass('show');
      //$('.main--menu').removeClass('main--menu-animation');
      $('#primary-nav').removeClass('main--menu-animation');
    } else if (window.innerWidth < 1000 && $('#primary-nav').hasClass('active')) {
      $('.fade').addClass('show');
    }

    if (window.innerWidth < 1000) {
      $('#primary-nav').addClass('main--menu-animation');
    }

    if(window.innerWidth > 1200) {

      var paddingValue = (window.innerWidth - 1160)/2;
      $('#primary-nav .menu-item.menu-item--expanded > .menu').css({
        'padding-left': paddingValue + 'px',
        'padding-right': paddingValue + 'px'
      });
      return;
    }

    $('#primary-nav .menu-item.menu-item--expanded > .menu').css({
      'padding-left': '20px',
      'padding-right':'20px'
    })
  };

  $(window).on('load resize', _debounce([setPadding, resetMissionSupport, setHeroMinH]));

})(jQuery);
//# sourceMappingURL=all.min.js.map
